
/*

highlight v5

Highlights arbitrary terms.

<http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html>

MIT license.

Johann Burkard
<http://johannburkard.de>
<mailto:jb@eaio.com>

*/

jQuery.fn.highlight = function (e) {
    function n(e, i) {
        var t = 0;
        if (3 == e.nodeType) {
            var r = e.data.toUpperCase().indexOf(i);
            if (r >= 0) {
                var o = document.createElement("span");
                o.className = "highlight";
                var a = e.splitText(r),
                    h = (a.splitText(i.length), a.cloneNode(!0));
                o.appendChild(h), a.parentNode.replaceChild(o, a), t = 1
            }
        } else if (1 == e.nodeType && e.childNodes && !/(script|style)/i.test(e.tagName))
            for (var l = 0; l < e.childNodes.length; ++l) l += n(e.childNodes[l], i);
        return t
    }
    return this.each(function () {
        n(this, e.toUpperCase())
    })
}, jQuery.fn.removeHighlight = function () {
    function e(n) {
        for (var i = 0, t = n.childNodes, r = t.length; r > i; i++) {
            var o = t[i];
            if (1 != o.nodeType) {
                if (3 == o.nodeType) {
                    var a = o.nextSibling;
                    if (null != a && 3 == a.nodeType) {
                        var d = o.nodeValue + a.nodeValue;
                        new_node = n.ownerDocument.createTextNode(d), n.insertBefore(new_node, o), n.removeChild(o), n.removeChild(a), i--, r--
                    }
                }
            } else e(o)
        }
    }
    return this.find("span.highlight").each(function () {
        var n = this.parentNode;
        n.replaceChild(this.firstChild, this), e(n)
    }).end()
};